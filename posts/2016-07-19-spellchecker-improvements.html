<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>~/blog - Improvements to spellchecker</title>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="../css/normalize.css" />
        <link rel="stylesheet" type="text/css" href="../css/skeleton.css" />
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
    </head>
    <body>
        <div class="container">
            <div class="row" id="header">
                <h1><a href="../">~/blog</a></h1>
            </div>
            <div class="row">
                <h1 id="post-title">Improvements to spellchecker</h1>
                <div id="content" class="twelve columns">
                    <p>The next key part of my Google Summer of Code Project, the improvements to the existing spellchecking system provided by libindic is getting ready.</p>
<h1 id="proposed-additions">Proposed Additions</h1>
<div class="figure">
<img src="../images/improv-spellcheck.png" alt="diagram in original proposal" />
<p class="caption">diagram in original proposal</p>
</div>
<h1 id="code">Code</h1>
<p>I’ve created a toy code with the promised functionality, which can easily be converted into the actual code.</p>
<p>This requires <a href="https://github.com/libindic/spellchecker">spellchecker</a> and <a href="https://github.com/jerinphilip/sandhi-splitter">sandhisplitter</a> to be installed.</p>
<p>Here’s the snippet:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>
<span class="im">from</span> __future__ <span class="im">import</span> absolute_import, division
<span class="im">from</span> __future__ <span class="im">import</span> print_function, unicode_literals
<span class="im">from</span> spellchecker.core <span class="im">import</span> Spellchecker
<span class="im">from</span> sandhisplitter <span class="im">import</span> Sandhisplitter
<span class="im">from</span> itertools <span class="im">import</span> product


<span class="kw">class</span> SEnhanced:
    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):
        <span class="va">self</span>.sc <span class="op">=</span> Spellchecker()
        <span class="va">self</span>.sp <span class="op">=</span> Sandhisplitter()

    <span class="kw">def</span> suggest(<span class="va">self</span>, word):
        <span class="cf">if</span> <span class="va">self</span>.sc.check(word):
            <span class="cf">return</span> [word]
        <span class="cf">return</span> <span class="va">self</span>.suggest_with_split(word)

    <span class="kw">def</span> suggest_with_split(<span class="va">self</span>, input_word):
        words, sps <span class="op">=</span> <span class="va">self</span>.sp.split(input_word)
        corrections <span class="op">=</span> []
        correct <span class="op">=</span> <span class="va">True</span>
        <span class="cf">for</span> word <span class="kw">in</span> words:
            <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.sc.check(word):
                correct <span class="op">=</span> <span class="va">False</span>
                candidates <span class="op">=</span> <span class="va">self</span>.sc.suggest(word)
                corrections.append(candidates)
            <span class="cf">else</span>:
                corrections.append([word])
        suggestions <span class="op">=</span> []
        <span class="cf">if</span> <span class="kw">not</span> correct:
            <span class="co"># Cross corrections.</span>
            possibilities <span class="op">=</span> product(<span class="op">*</span>corrections)
            <span class="cf">for</span> element <span class="kw">in</span> possibilities:
                joined <span class="op">=</span> <span class="va">self</span>.sp.join(element)
                suggestions.append(joined)
        <span class="cf">else</span>:
            suggestions <span class="op">=</span> [input_word]
        <span class="cf">return</span> suggestions


<span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:
    <span class="im">import</span> sys
    <span class="im">from</span> io <span class="im">import</span> <span class="bu">open</span>
    s <span class="op">=</span> SEnhanced()
    testfile <span class="op">=</span> <span class="bu">open</span>(sys.argv[<span class="dv">1</span>], <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)
    outfile <span class="op">=</span> <span class="bu">open</span>(sys.argv[<span class="dv">2</span>], <span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)
    <span class="cf">for</span> line <span class="kw">in</span> testfile:
        word <span class="op">=</span> line.strip()
        outfile.write(word<span class="op">+</span><span class="st">&quot;:</span><span class="ch">\n</span><span class="st">&quot;</span>)
        <span class="cf">for</span> suggestion <span class="kw">in</span> s.suggest(word):
            outfile.write(<span class="st">'</span><span class="ch">\t</span><span class="st">'</span><span class="op">+</span>suggestion<span class="op">+</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</code></pre></div>
<h2 id="input-file">Input file</h2>
<p>Now, after I give the following as input:</p>
<pre><code>എന്തൊക്കെയോ
ആദ്യമെത്തി 
കൊള്ളാമെന്ന് 
എവിടെനിന്നോ
അവനെക്കൊണ്ട് 
എത്രയൊക്കെയായാലും
മത്രമായ
കണ്ടുകണ്ടങ്ങിരിക്കുംജനങ്ങളെ
എന്തനോവേണ്ടി
ഉല്‍ക്കൊണ്ടു</code></pre>
<h2 id="output">Output</h2>
<p>I get the following output:</p>
<pre><code>എന്തൊക്കെയോ:
	എന്തൊക്കെയോ
ആദ്യമെത്തി:
	ആദ്യമെത്തി
കൊള്ളാമെന്ന്:
എവിടെനിന്നോ:
	എവിടെനിന്നോ
അവനെക്കൊണ്ട്:
	അവളെക്കൊണ്ടു
എത്രയൊക്കെയായാലും:
	എത്രയൊക്കെയായാലും
മത്രമായ:
	മകരമായ
	മങ്കമായ
	മതമായ
	മതവുമായ
	മതിരയായ
	മതേതരമായ
	മത്തയായ
	മത്തെയായ
	മത്തായ
	മത്സരയായ
	മത്സരമായ
	മദ്യമായ
	മധുരമായ
	മധ്യമായ
	മന്ത്രമായ
	മന്ദമായ
	മന്നമായ
	മരമായ
	മറ്റമായ
	മല്സരമായ
	മഷ്രൂമായ
	മഹത്തമായ
	മഹത്വമായ
	മാതാരമായ
	മാത്യമായ
	മാത്രയായ
	മാത്രമായ
	മാത്രോയായ
	മിത്രയായ
	മിത്രമായ
	മിത്രായായ
	മുത്തമായ
	മൈത്രിയായ
	മൊതിരമായ
	മൊത്തമായ
	മോതിരമായ
കണ്ടുകണ്ടങ്ങിരിക്കുംജനങ്ങളെ:
എന്തനോവേണ്ടി:
	എന്തിനുവേണ്ടി
ഉല്‍ക്കൊണ്ടു:</code></pre>
<p>The function <code>suggest</code> returns an empty list if the word is incorrect and no suggestions have been found. If the word is correct, it simply returns a singleton list with the word in it. Otherwise, it contains the possible suggestions.</p>
<p>Of course, there are limitations. But this is definitely an improvement on the previous spellchecker which used to give wrong spelling and no outputs on many of these words.</p>
<h1 id="what-next">What next?</h1>
<p>A polished version of this was what I had in mind when I started with the project. There has been developments in the spellchecker to handle inflections, the source being hosted at <a href="https://github.com/balasankarc/spellchecker">balasankarc/spellchecker</a>. I’ll have to see how well I can use that and make the spellchecker even better.</p>
<p>Also, the next question is where this code should be merged in. The code is written using the existing API and operates one layer above both. As the modules in the improve, the outputs here also will improve.</p>
<div class="info">
    Written July 19, 2016
</div>
<div class="info">
    
    Tags: <a href="../tags/gsoc.html">gsoc</a>, <a href="../tags/libindic.html">libindic</a>
    
</div>

                </div>
                <div id="footer" class="twelve columns">
                    Site proudly generated by
                    <a href="http://jaspervdj.be/hakyll">Hakyll</a>
                </div>
            </div>
        </div>
    </body>
</html>
